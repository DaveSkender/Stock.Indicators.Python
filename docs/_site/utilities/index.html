

<!DOCTYPE html>
<html lang="en-US">

<head>
<meta charset="UTF-8">

<!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Utilities and Helpers | Stock Indicators</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Utilities and Helpers" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Stock Indicators for Python" />
<meta property="og:description" content="Stock Indicators for Python" />
<link rel="canonical" href="http://localhost:4000/utilities/" />
<meta property="og:url" content="http://localhost:4000/utilities/" />
<meta property="og:site_name" content="Stock Indicators" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Utilities and Helpers" />
<script type="application/ld+json">
{"url":"http://localhost:4000/utilities/","headline":"Utilities and Helpers","dateModified":"2021-11-21T15:49:07+09:00","description":"Stock Indicators for Python","@type":"WebPage","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="theme-color" content="#424242">
<meta name="msapplication-TileColor" content="#424242">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<link rel="stylesheet" href="/assets/css/style.css?v=b2827a07114582215b9df9bdea330cfea1132af1">
<link rel="canonical" href="http://localhost:4000/utilities/" />

<link rel="manifest" href="/site.webmanifest">
<link rel="icon" type="image/x-icon" href="favicon.ico">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/favicon-16x16.png">
<link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/apple-touch-icon.png">
<link rel="mask-icon" href="/assets/icons/safari-pinned-tab.svg" color="#424242">


</head>

<body>
  <header class="page-header" role="banner">

    <h1 class="project-name">
      <a href="/">
        Stock Indicators
      </a>
    </h1>

    <h2 class="project-tagline">
      Send in historical price quotes and get back desired technical indicators.
      <br class="not-mobile">
      Nothing more.
    </h2>

    <a href="/indicators/" class="btn">Indicators</a>
    <a href="/guide/" class="btn">Guide</a>
    <a href="https://www.nuget.org/packages/Skender.Stock.Indicators" class="btn">NuGet<span class="if-large"> Package</span></a>
    
    <a href="https://github.com/LeeDongGeon1996/Stock.Indicators.Python" class="btn not-mobile"><span class="if-large">View on </span>GitHub</a>
    
  </header>

  <main id="content" class="main-content" role="main">
    <h1 id="utilities-and-helpers">Utilities and Helpers</h1>

<ul>
  <li><a href="#utilities-for-historical-quotes">for Historical Quotes</a></li>
  <li><a href="#utilities-for-indicator-results">for Indicator Results</a></li>
</ul>

<h2 id="utilities-for-historical-quotes">Utilities for historical quotes</h2>

<h3 id="validate-quote-history">Validate quote history</h3>

<p><code class="language-plaintext highlighter-rouge">quotes.Validate()</code> is an advanced check of your <code class="language-plaintext highlighter-rouge">IEnumerable&lt;TQuote&gt; quotes</code> (historical quotes).  It will check for duplicate dates and other bad data.  This comes at a small performance cost, so we did not automatically add these advanced validations in the indicator methods.  Of course, you can and should do your own validation of <code class="language-plaintext highlighter-rouge">quotes</code> prior to using it in this library.  Bad historical quotes data can produce unexpected results.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// fetch historical quotes from your favorite feed</span>
<span class="n">IEnumerable</span><span class="p">&lt;</span><span class="n">Quote</span><span class="p">&gt;</span> <span class="n">quotes</span> <span class="p">=</span> <span class="nf">GetHistoryFromFeed</span><span class="p">(</span><span class="s">"SPY"</span><span class="p">);</span>

<span class="c1">// advanced validation</span>
<span class="n">IEnumerable</span><span class="p">&lt;</span><span class="n">Quote</span><span class="p">&gt;</span> <span class="n">validatedQuotes</span> <span class="p">=</span> <span class="n">quotes</span><span class="p">.</span><span class="nf">Validate</span><span class="p">();</span>
</code></pre></div></div>

<h3 id="resize-quote-history">Resize quote history</h3>

<p><code class="language-plaintext highlighter-rouge">quotes.Aggregate(newSize)</code> is a tool to convert quotes to larger bar sizes.  For example if you have minute bar sizes in <code class="language-plaintext highlighter-rouge">quotes</code>, but want to convert it to hourly or daily.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// fetch historical quotes from your favorite feed</span>
<span class="n">IEnumerable</span><span class="p">&lt;</span><span class="n">TQuote</span><span class="p">&gt;</span> <span class="n">minuteBarQuotes</span> <span class="p">=</span> <span class="nf">GetHistoryFromFeed</span><span class="p">(</span><span class="s">"MSFT"</span><span class="p">);</span>

<span class="c1">// aggregate into larger bars</span>
<span class="n">IEnumerable</span><span class="p">&lt;</span><span class="n">Quote</span><span class="p">&gt;</span> <span class="n">dayBarQuotes</span> <span class="p">=</span> 
  <span class="n">minuteBarQuotes</span><span class="p">.</span><span class="nf">Aggregate</span><span class="p">(</span><span class="n">PeriodSize</span><span class="p">.</span><span class="n">Day</span><span class="p">);</span>
</code></pre></div></div>

<p>An alternate version of this utility is provided where you can use any native <code class="language-plaintext highlighter-rouge">TimeSpan</code> value that is greater than <code class="language-plaintext highlighter-rouge">TimeSpan.Zero</code>.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// alternate usage</span>
<span class="n">IEnumerable</span><span class="p">&lt;</span><span class="n">Quote</span><span class="p">&gt;</span> <span class="n">dayBarQuotes</span> <span class="p">=</span> 
  <span class="n">minuteBarQuotes</span><span class="p">.</span><span class="nf">Aggregate</span><span class="p">(</span><span class="n">TimeSpan</span> <span class="n">timeSpan</span><span class="p">);</span>
</code></pre></div></div>

<p><img class="emoji" title=":warning:" alt=":warning:" src="https://github.githubassets.com/images/icons/emoji/unicode/26a0.png" height="20" width="20"> <strong>Warning</strong>: Partially populated period windows at the beginning, end, and market open/close points in <code class="language-plaintext highlighter-rouge">quotes</code> can be misleading when aggregated.  For example, if you are aggregating intraday minute bars into 15 minute bars and there is a single 4:00pm minute bar at the end, the resulting 4:00pm 15-minute bar will only have one minute of data in it whereas the previous 3:45pm bar will have all 15 minutes of bars aggregated (3:45-3:59pm).</p>

<h4 id="periodsize-options-for-newsize">PeriodSize options (for newSize)</h4>

<ul>
  <li><code class="language-plaintext highlighter-rouge">PeriodSize.Week</code></li>
  <li><code class="language-plaintext highlighter-rouge">PeriodSize.Day</code></li>
  <li><code class="language-plaintext highlighter-rouge">PeriodSize.FourHours</code></li>
  <li><code class="language-plaintext highlighter-rouge">PeriodSize.TwoHours</code></li>
  <li><code class="language-plaintext highlighter-rouge">PeriodSize.OneHour</code></li>
  <li><code class="language-plaintext highlighter-rouge">PeriodSize.ThirtyMinutes</code></li>
  <li><code class="language-plaintext highlighter-rouge">PeriodSize.FifteenMinutes</code></li>
  <li><code class="language-plaintext highlighter-rouge">PeriodSize.FiveMinutes</code></li>
  <li><code class="language-plaintext highlighter-rouge">PeriodSize.ThreeMinutes</code></li>
  <li><code class="language-plaintext highlighter-rouge">PeriodSize.TwoMinutes</code></li>
  <li><code class="language-plaintext highlighter-rouge">PeriodSize.OneMinute</code></li>
</ul>

<h2 id="utilities-for-indicator-results">Utilities for indicator results</h2>

<h3 id="convert-to-quotes">Convert to quotes</h3>

<p><code class="language-plaintext highlighter-rouge">results.ConvertToQuotes()</code> will transform indicator results back into an <code class="language-plaintext highlighter-rouge">IEnumerable&lt;Quote&gt;</code> so it can be re-used to generate an <a href="/guide/#generating-indicator-of-indicators">indicator of indicators</a>.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// example: an RSI of Renko bricks</span>
<span class="n">IEnumerable</span><span class="p">&lt;</span><span class="n">RsiResult</span><span class="p">&gt;</span> <span class="n">results</span> 
  <span class="p">=</span> <span class="n">quotes</span><span class="p">.</span><span class="nf">GetRenko</span><span class="p">(..)</span>
    <span class="p">.</span><span class="nf">ConvertToQuotes</span><span class="p">()</span>
    <span class="p">.</span><span class="nf">GetRsi</span><span class="p">(</span><span class="m">14</span><span class="p">);</span>
</code></pre></div></div>

<p>Currently, <code class="language-plaintext highlighter-rouge">.ConvertToQuotes</code> is only available on a select few indicators.  If you find an indicator that is a good candidate for this utility, please <a href="https://github.com/LeeDongGeon1996/Stock.Indicators.Python/issues">submit an Issue</a>.</p>

<p><img class="emoji" title=":warning:" alt=":warning:" src="https://github.githubassets.com/images/icons/emoji/unicode/26a0.png" height="20" width="20"> WARNING! In many cases, <code class="language-plaintext highlighter-rouge">.ConvertToQuotes</code> will remove any <code class="language-plaintext highlighter-rouge">null</code> results – this will produce fewer historical <code class="language-plaintext highlighter-rouge">quotes</code> than were originally provided.</p>

<h3 id="find-indicator-result-by-date">Find indicator result by date</h3>

<p><code class="language-plaintext highlighter-rouge">results.Find(lookupDate)</code> is a simple lookup for your indicator results collection.  Just specify the date you want returned.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// fetch historical quotes from your favorite feed</span>
<span class="n">IEnumerable</span><span class="p">&lt;</span><span class="n">Quote</span><span class="p">&gt;</span> <span class="n">quotes</span> <span class="p">=</span> <span class="nf">GetHistoryFromFeed</span><span class="p">(</span><span class="s">"MSFT"</span><span class="p">);</span>

<span class="c1">// calculate indicator series</span>
<span class="n">IEnumerable</span><span class="p">&lt;</span><span class="n">SmaResult</span><span class="p">&gt;</span> <span class="n">results</span> <span class="p">=</span> <span class="n">quotes</span><span class="p">.</span><span class="nf">GetSma</span><span class="p">(</span><span class="m">20</span><span class="p">);</span>

<span class="c1">// find result on a specific date</span>
<span class="n">DateTime</span> <span class="n">lookupDate</span> <span class="p">=</span> <span class="p">[..]</span> <span class="c1">// the date you want to find</span>
<span class="n">SmaResult</span> <span class="n">result</span> <span class="p">=</span> <span class="n">results</span><span class="p">.</span><span class="nf">Find</span><span class="p">(</span><span class="n">lookupDate</span><span class="p">);</span>
</code></pre></div></div>

<h3 id="remove-warmup-periods">Remove warmup periods</h3>

<p><code class="language-plaintext highlighter-rouge">results.RemoveWarmupPeriods()</code> will remove the recommended initial warmup periods from indicator results.
An alternative <code class="language-plaintext highlighter-rouge">.RemoveWarmupPeriods(removePeriods)</code> is also provided if you want to customize the pruning amount.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// auto remove recommended warmup periods</span>
<span class="n">IEnumerable</span><span class="p">&lt;</span><span class="n">AdxResult</span><span class="p">&gt;</span> <span class="n">results</span> <span class="p">=</span> 
  <span class="n">quotes</span><span class="p">.</span><span class="nf">GetAdx</span><span class="p">(</span><span class="m">14</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">RemoveWarmupPeriods</span><span class="p">();</span>

<span class="c1">// remove user-specific quantity of periods</span>
<span class="n">IEnumerable</span><span class="p">&lt;</span><span class="n">AdxResult</span><span class="p">&gt;</span> <span class="n">results</span> <span class="p">=</span> 
  <span class="n">quotes</span><span class="p">.</span><span class="nf">GetAdx</span><span class="p">(</span><span class="m">14</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">RemoveWarmupPeriods</span><span class="p">(</span><span class="m">50</span><span class="p">);</span>
</code></pre></div></div>

<p>See <a href="/indicators/#content">individual indicator pages</a> for information on recommended pruning quantities.</p>

<p><img class="emoji" title=":warning:" alt=":warning:" src="https://github.githubassets.com/images/icons/emoji/unicode/26a0.png" height="20" width="20"> Note: <code class="language-plaintext highlighter-rouge">.RemoveWarmupPeriods()</code> is not available on indicators that do not have any recommended pruning; however, you can still do a custom pruning by using the customizable <code class="language-plaintext highlighter-rouge">.RemoveWarmupPeriods(removePeriods)</code>.</p>

<p><img class="emoji" title=":warning:" alt=":warning:" src="https://github.githubassets.com/images/icons/emoji/unicode/26a0.png" height="20" width="20"> WARNING! <code class="language-plaintext highlighter-rouge">.RemoveWarmupPeriods()</code> will reverse-engineer some parameters in determing the recommended pruning amount.  Consequently, on rare occassions when there are unusual results, there can be an erroneous increase in the amount of pruning.  If you want more certainty, use the <code class="language-plaintext highlighter-rouge">.RemoveWarmupPeriods(removePeriods)</code> with a specific number of <code class="language-plaintext highlighter-rouge">removePeriods</code>.</p>

  </main>
</body>

</html>